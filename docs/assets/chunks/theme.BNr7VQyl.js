import{a as g}from"./index.CASokwIO.js";const l=(e={})=>{let t=g(e);return t.setKey=function(o,a){let s=t.value;typeof a>"u"&&o in t.value?(t.value={...t.value},delete t.value[o],t.notify(s,o)):t.value[o]!==a&&(t.value={...t.value,[o]:a},t.notify(s,o))},t},u="cutesite-theme";function h(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function v(){if(typeof window>"u")return null;try{const e=localStorage.getItem(u);if(e)return JSON.parse(e)}catch{return null}return null}function m(e){if(!(typeof window>"u"))try{localStorage.setItem(u,JSON.stringify({mode:e.mode}))}catch{console.warn("Failed to save theme to localStorage")}}const i=l({mode:"light",background:"default",decoration:"sakura"}),r=l({isActive:!1,previousTheme:null});function y(){const e=v(),t=h();i.set({mode:e?.mode||t,background:"default",decoration:"sakura"}),r.set({isActive:!1,previousTheme:null}),d()}function d(){if(typeof document>"u")return;const{mode:e,background:t,decoration:o}=i.get();document.documentElement.classList.toggle("dark",e==="dark"),document.body.classList.toggle("lain-background",t==="lain");const s=document.querySelector(".sakura-decoration"),c=document.querySelector(".lily-decoration");o==="lily"?(s?.classList.add("hidden"),c?.classList.remove("hidden")):(s?.classList.remove("hidden"),c?.classList.add("hidden"));const n=document.getElementById("lain-bg-video");t==="lain"&&n?(n.classList.remove("hidden"),n.play().catch(()=>{})):n&&(n.classList.add("hidden"),n.pause(),n.currentTime=0)}function f(e){const o={...i.get(),...e};i.set(o),m(o),d()}function T(){const e=i.get();f({mode:e.mode==="dark"?"light":"dark"})}function k(){const e=i.get();r.set({isActive:!0,previousTheme:{...e}}),f({background:"lain",decoration:"lily"})}function w(){const e=r.get();e.isActive&&e.previousTheme&&(i.set(e.previousTheme),m(e.previousTheme),d()),r.set({isActive:!1,previousTheme:null})}export{k as a,w as d,y as i,l as m,T as t};
